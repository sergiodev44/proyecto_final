{% extends 'innercircle/base.html' %}

{% block title %}{{ profile_user.username }}'s Profile - InnerCircle{% endblock %}

{% block content %}
<div class="profile-header">
  <div class="row align-items-center">
    <div class="col-md-3 text-center">
      {% if profile.avatar %}
        <img src="{{ profile.avatar.url }}" class="profile-avatar" alt="{{ profile_user.username }}">
      {% else %}
        <div class="profile-avatar" style="background: #6c63ff; font-size: 2rem; color: white;">
          {{ profile_user.username|first|upper }}
        </div>
      {% endif %}
    </div>
    <div class="col-md-9">
      <h2>{{ profile_user.get_full_name|default:profile_user.username }}</h2>
      <p class="mb-2">@{{ profile_user.username }}</p>
      {% if profile.bio %}
        <p class="mb-0">{{ profile.bio }}</p>
      {% endif %}
    </div>
  </div>
</div>

<div class="row mb-4">
  <div class="col-md-3">
    <div class="stats-card">
      <div class="stats-number">{{ profile.get_items_count }}</div>
      <div class="stats-label">Items Posted</div>
    </div>
  </div>
  <div class="col-md-3">
    <div class="stats-card">
      <div class="stats-number">{{ profile.get_friends_count }}</div>
      <div class="stats-label">Friends</div>
    </div>
  </div>
</div>

{% if profile_user == user %}
  <div class="mb-4">
    <a href="{% url 'profile_edit' %}" class="btn btn-primary">
      <i class="bi bi-pencil me-2"></i>Edit Profile
    </a>
  </div>
{% endif %}

<h3 class="mb-3">
  <i class="bi bi-bag me-2"></i>Items Posted
</h3>

{% if items %}
  <div class="item-grid">
    {% for item in items %}
    <div class="card item-card h-100">
      {% if item.photo %}
      <img src="{{ item.photo.url }}" class="card-img-top" alt="{{ item.title }}">
      {% endif %}
      
      <div class="card-body d-flex flex-column">
        <h5 class="card-title">{{ item.title }}</h5>
        <p class="card-text text-muted small">{{ item.description|truncatechars:60 }}</p>
        
        <div class="item-meta mb-3">
          <span class="badge bg-secondary">{{ item.get_category_display }}</span>
        </div>
        
        <div class="mt-auto">
          <a href="{% url 'item_detail' item.id %}" class="btn btn-primary btn-sm w-100">
            <i class="bi bi-heart me-1"></i>View Item
          </a>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
{% else %}
  <div class="alert alert-info">
    <i class="bi bi-inbox me-2"></i>No items posted yet.
  </div>
{% endif %}
{% endblock %}
